<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TEST</title>
    <link rel="shortcut icon" href="/public/img/common/img_favicon.ico" type="image/x-icon">

    <!-- css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
    <link rel="stylesheet" href="/public/css/reset.css">
    <link rel="stylesheet" href="./slick/slick.css" />
    <link rel="stylesheet" href="./slick/slick-theme.css" />
    <link rel="stylesheet" href="/public/css/common.css">
    <link rel="stylesheet" href="/public/css/review.css">

    <!-- js -->
    <script src="/public/jquery/jquery-3.6.1.min.js"></script>
    <script src="./slick/slick.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.js"></script>
    <script src="/common.js"></script>
    <script>

        document.addEventListener('DOMContentLoaded', function () {


            $('.wrap_imgbox').slick({
                centerMode: false,
                slidesToShow: 3,
                infinite:false,
            });


            var stars = document.querySelectorAll('.star');

            function setRating(clickedStarIndex) {
                stars.forEach((star, index) => {
                    if(index <= clickedStarIndex) {
                        star.src = './img/common/star_big.svg';
                        star.setAttribute('data-filled', 'true');
                    } else {
                        star.src = './img/common/star_big_empty.svg'; 
                        star.setAttribute('data-filled', 'false');
                    }
                });
            }

            stars.forEach((star, index) => {
                star.addEventListener('click', function() {
                    setRating(index);
                });
            });



            var imgBoxes = document.querySelectorAll('.imgbox');
                var imageInput = document.getElementById('imageInput');

                function handleImageChange(imgBox) {
                    imageInput.click();

                    imageInput.onchange = function() {
                        if(this.files && this.files[0]) {
                            var reader = new FileReader();
                            reader.onload = function(e) {
                                imgBox.style.backgroundImage = 'url(' + e.target.result + ')';
                                imgBox.style.backgroundSize = 'cover';
                            };
                            reader.readAsDataURL(this.files[0]);
                        }
                    };
                }
            
                imgBoxes.forEach(function(imgBox) {
                    imgBox.addEventListener('click', function() {
                        handleImageChange(imgBox);
                    });
                });


        });

    </script>
</head>

<body class="pg_review_create">
    <header>
        <a href="javascript:window.history.back();"><img src="/public/img/common/back.svg" alt="back"></a>
        <h1>후기작성</h1>
        <img src="/public/img/common/user_gray.svg" alt="user_gray">
    </header>
    <main>


        <div class="wrap">

            <div class="top">

                <p><span>만물상 선달</span> 님과의 상담 <br>어떠셨나요?</p>
                <div class="wrap_star">
                    <img src="/public/img/common/star_big_empty.svg" alt="star_big" class="star" data-filled="false">
                    <img src="/public/img/common/star_big_empty.svg" alt="star_big" class="star" data-filled="false">
                    <img src="/public/img/common/star_big_empty.svg" alt="star_big" class="star" data-filled="false">
                    <img src="/public/img/common/star_big_empty.svg" alt="star_big" class="star" data-filled="false">
                    <img src="/public/img/common/star_big_empty.svg" alt="star_big" class="star" data-filled="false">
                </div>
                
                
            </div>

            <div class="bottom">

                <textarea name="" id="" placeholder="후기를 입력해주세요!"></textarea>
                <div class="textarea_read"></div>

                <div class="wrap_imgbox">
                    <div class="imgbox"><input type="file" id="imageInput" style="display: none;" accept="image/*" /></div>
                    <div class="imgbox"><input type="file" id="imageInput" style="display: none;" accept="image/*" /></div>
                    <div class="imgbox"><input type="file" id="imageInput" style="display: none;" accept="image/*" /></div>
                    <div class="imgbox"><input type="file" id="imageInput" style="display: none;" accept="image/*" /></div>
                    <div class="imgbox"><input type="file" id="imageInput" style="display: none;" accept="image/*" /></div>
                </div>

            </div>

        </div>


    </main>
</body>

</html>