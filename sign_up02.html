<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TEST</title>

  <link rel="stylesheet" href="./css/reset.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.css" />
  <link rel="stylesheet" href="./css/common.css">
  <link rel="stylesheet" href="./css/sign.css">

  <script src="./js/jquery-3.6.1.min.js"></script>
  <script src="./js/common.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.js"></script>

  <script>

    
    document.addEventListener('DOMContentLoaded', function () {
      
        var action = sessionStorage.getItem('action');

        if(action == 'signup"'){
        location.href="./sign_up01.html"
       }

        var chkAll = document.getElementById('chkAll');

        var labelForChkAll = document.querySelector('label[for="chkAll"]');

        var updateCheckboxes = function (checked) {
          var checkboxes = document.querySelectorAll('.wrap_label .label input[type="checkbox"]');
          checkboxes.forEach(function (checkbox) {
            checkbox.checked = checked;
          });
          labelForChkAll.style.backgroundColor = checked ? '#8B71E3' : '';
        };

        chkAll.addEventListener('change', function () {
          updateCheckboxes(chkAll.checked);
        });

        var otherCheckboxes = document.querySelectorAll('.wrap_label .label input[type="checkbox"]:not(#chkAll)');

        otherCheckboxes.forEach(function (checkbox) {
          checkbox.addEventListener('change', function () {
            var allChecked = Array.from(otherCheckboxes).every(c => c.checked);
            chkAll.checked = allChecked;
            labelForChkAll.style.backgroundColor = allChecked ? '#8B71E3' : '';
          });
        });

        function areRequiredCheckboxesChecked() {
          var requiredCheckboxes = document.querySelectorAll('.wrap_label .label:not(:first-child):not(:last-child) input[type="checkbox"]');
          return Array.from(requiredCheckboxes).every(checkbox => checkbox.checked);
        }

        document.getElementById('btnNext').addEventListener('click', function() {
          if (areRequiredCheckboxesChecked()) {
              sessionStorage.setItem('terms', true);
              window.location.href = 'sign_up03.html'; 
          } else {
              Swal.fire({
                  text: '모든 필수 항목을 체크해주세요.',
              });
          }
      });;

    });
  </script>


</head>

<body class="pg_sign sign_up02">

  <header>
    <a href="javascript:window.history.back();"><img src="./img/common/back.svg" alt="back"></a>
    <h1>회원가입</h1>
    <span></span>
  </header>

  <main>
    <div class="middle">
      <p>회원가입 후
        진정한 성장을 경험하세요!</p>
    </div>

    <div class="bottom">

      <div class="wrap_label">

        <label class="label" for="chkAll">
          <input type="checkbox" id="chkAll">
          <span>이용약관에 모두 동의합니다.</span>
        </label>

        <label class="label">
          <input type="checkbox">
          <span>만 14세 이상입니다.(필수)</span>
        </label>

        <label class="label">
          <input type="checkbox">
          <span>서비스 이용약관(필수)</span>
        </label>

        <label class="label">
          <input type="checkbox">
          <span>개인정보 취급 방침(필수)</span>
        </label>

        <label class="label">
          <input type="checkbox">
          <span>커넥터즈 맞춤 정보 수신 동의(선택) </span>
        </label>

      </div>

    </div>

  </main>


  <button type="button" class="btn_action" id="btnNext">다음</button>


</body>

</html>